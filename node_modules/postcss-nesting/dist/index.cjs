"use strict";function e(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var t=e(require("postcss-selector-parser"));function n(e){const t=e.parent,n=t.index(e);return n&&t.cloneBefore().removeAll().append(t.nodes.slice(0,n)),t.before(e),t}function r(e){e.nodes.length||e.remove()}function o(e,n){let r=!1,o=e.length>1;const s=t.default().astSync(e.join(",")),p=t.default().astSync(`:is(${e.join(",")})`);let a=0;return s.walk((e=>{"root"!==e.type&&a++})),a>2&&(r=!0),n.map((e=>t.default((e=>{e.walkNesting((e=>{if(o)e.replaceWith(p.clone());else{if(e.next()&&"tag"===e.next().type){const n=t.default.pseudo({value:":is"});return n.append(e.next().clone()),e.next().replaceWith(n),r?void e.replaceWith(p.clone()):void e.replaceWith(s.clone())}if(e.prev()&&"combinator"!==e.prev().type&&s.first&&s.first.first&&"tag"===s.first.first.type){if(r)return void e.replaceWith(p.clone());let n=e.prev();for(;n.prev()&&"combinator"!==n.prev().type;)n=n.prev();if("tag"!==n.type)return e.parent.insertBefore(n,s.clone()),void e.remove();const o=t.default.pseudo({value:":is"});return o.append(s.clone()),void e.replaceWith(o)}e.replaceWith(s.clone())}}))})).processSync(e)))}const s=e=>{let t=[],n="",r=!1,o=0,s=!1,p=!1;for(let a of e)p?p=!1:"\\"===a?p=!0:s?a===s&&(s=!1):'"'===a||"'"===a?s=a:"("===a?o+=1:")"===a?o>0&&(o-=1):0===o&&","===a&&(r=!0),r?(""!==n&&t.push(n.trim()),n="",r=!1):n+=a;return t.push(n.trim()),t};var p=["container","document","media","supports"];function a(e){const t=n(e);var o,p;e.params=(o=t.params,p=e.params,s(o).map((e=>s(p).map((t=>`${e} and ${t}`)).join(", "))).join(", ")),r(t)}function l(e){e.each((e=>{(e=>"rule"===e.type&&"rule"===Object(e.parent).type&&e.selectors.every((e=>0===e.trim().indexOf("&")&&-1===e.indexOf("|"))))(e)?function(e){const t=n(e);e.selectors=o(t.selectors,e.selectors),("rule"===e.type&&"rule"===t.type&&e.selector===t.selector||"atrule"===e.type&&"atrule"===t.type&&e.params===t.params)&&e.append(...t.nodes),r(t)}(e):(e=>"atrule"===e.type&&"nest"===e.name&&"rule"===Object(e.parent).type&&s(e.params).every((e=>e.split("&").length>=2&&-1===e.indexOf("|"))))(e)?function(e,t){const p=n(e),a=p.clone().removeAll().append(e.nodes);e.replaceWith(a),a.selectors=o(p.selectors,s(e.params)),r(p),t(a)}(e,l):(e=>"atrule"===e.type&&p.includes(e.name)&&"rule"===Object(e.parent).type)(e)?function(e,t){const o=n(e),s=o.clone().removeAll().append(e.nodes);e.append(s),r(o),t(s)}(e,l):(e=>"atrule"===e.type&&p.includes(e.name)&&"atrule"===Object(e.parent).type&&e.name===e.parent.name)(e)&&a(e),Object(e.nodes).length&&l(e)}))}function c(){return{postcssPlugin:"postcss-nesting",Rule(e){l(e)}}}c.postcss=!0,module.exports=c;
//# sourceMappingURL=index.cjs.map
